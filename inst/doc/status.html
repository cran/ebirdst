<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Introduction to eBird Status Data Products</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Introduction to eBird Status Data
Products</h1>



<style type="text/css">
.table {
width: 75%;
}
</style>
<div id="background" class="section level1">
<h1>Background</h1>
<p>The study and conservation of the natural world relies on detailed
information about the distributions, abundances, and population trends
of species over time. For many taxa, this information is challenging to
obtain at relevant geographic scales. The goal of the eBird Status and
Trends project is to use data from <a href="https://ebird.org/home">eBird</a>, the global community science
bird monitoring program administered by The Cornell Lab of Ornithology,
to generate a reliable, standardized source of biodiversity information
for the world’s bird populations. To translate the eBird observations
into robust data products, we use machine learning to fill
spatiotemporal gaps, using local land cover descriptions derived from
remote sensing data, while controlling for biases inherent in species
observations collected by community scientists. See Fink et al. (2019)
for more information about the analysis used to generate these data.</p>
<p>This vignette gives an overview of the eBird Status Data Products,
which estimate the full annual cycle distributions, relative abundances,
and habitat associations for 2,980 species for the year 2023. For each
species, distribution and abundance estimates are available for all 52
weeks of the year across a regular 3 km by 3 km square grid of cells
covering the globe. Variation in detectability associated with the
search effort is controlled by standardizing the estimates as the
expected occurrence rate and count of the species on a 1 hour, 2 km
checklist by an expert eBird observer at the optimal time of day and
with optimal weather conditions for detecting the species.</p>
</div>
<div id="access" class="section level1">
<h1>Data access</h1>
<p>Data access is granted through an Access Request Form at: <a href="https://ebird.org/st/request" class="uri">https://ebird.org/st/request</a>. Filling out this form
generates a key to be used with this R package. Our terms of use have
been designed to be quite permissive in many cases, particularly
academic and research use. When requesting data access, please be sure
to carefully read the terms of use and ensure that your intended use is
not restricted.</p>
<p>After completing the Access Request Form, you will be provided an
eBird Status and Trends Data Products access key, which you will need
when downloading data. To store the key so this package can access it
when downloading data, use the function
<code>set_ebirdst_access_key(&quot;XXXXX&quot;)</code>, where <code>&quot;XXXXX&quot;</code>
is the access key provided to you.</p>
<p>There are a wide variety of data products available for download with
<code>ebirdst</code> via the function
<code>ebirdst_download_status()</code>. The first argument to this
function defines the species (as a common name, scientific name, or
species code) to download data for and the remaining arguments define
the specific data products to download. Throughout this vignettes, we’ll
use a simplified example dataset consisting of estimates for
Yellow-bellied Sapsucker in Michigan. This dataset is designed to be
small for faster download and is accessible without a key. By default
<code>ebirst_download_status()</code> only downloads the most commonly
used data products; however, since this vignette will cover all the
available data products, we’ll use <code>download_all = TRUE</code>.
Note that data for any species other that the example dataset requires a
key to access.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="fu">library</span>(terra)</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="fu">library</span>(ebirdst)</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="co"># download a simplified example dataset for Yellow-bellied Sapsucker in Michigan</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="fu">ebirdst_download_status</span>(<span class="at">species =</span> <span class="st">&quot;yebsap-example&quot;</span>, <span class="at">download_all =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>By default, <code>ebirdst_download_status()</code> downloads data to
a centralized directory for on your computer. You can see what that
directory is with the function <code>ebirdst_data_dir()</code> and you
can change the default download directory by setting the environment
variable <code>EBIRDST_DATA_DIR</code>, for example by calling
<code>usethis::edit_r_environ()</code> and adding a line such as
<code>EBIRDST_DATA_DIR=/custom/download/directory/</code>.</p>
<p><strong>IMPORTANT: eBird Status and Trends Data Products are designed
to be downloaded and accessed using the <code>ebirdst</code> R package.
Data downloaded using this R package have a specific file structure and
changing file names or locations will disrupt the ability of functions
in this package to access the data. If you prefer to access data for use
outside of R, consider downloading data via the <a href="https://science.ebird.org/en/status-and-trends/download-data">eBird
Status and Trends website</a>.</strong></p>
</div>
<div id="species" class="section level1">
<h1>Species list</h1>
<p>The data frame <code>ebirdst_runs</code> lists all species with eBird
Status Data Products available for download.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">glimpse</span>(ebirdst_runs)</span></code></pre></div>
<p>If you’re working in RStudio, you can use <code>View()</code> to
interactively explore this data frame.</p>
<p>All species go through a process of review by an expert on that
species prior to being released. The <code>ebirdst_runs</code> data
frame contains information from this review process. For migrants,
reviewers assess the model estimates for each of the four seasons:
breeding, non-breeding, pre-breeding migration, and post-breeding
migration. Resident (i.e., non-migratory) species are identified by
having <code>TRUE</code> in the <code>is_resident</code> column of
<code>ebirdst_runs</code>, and these species are assessed across the
whole year rather than seasonally. <code>ebirdst_runs</code> contains
two important pieces of information for each season: a
<strong>quality</strong> rating and <strong>seasonal dates</strong>.</p>
<p>The <strong>seasonal dates</strong> define the weeks that fall within
each season. Breeding and non-breeding season dates are defined for each
species as the weeks during those seasons when the species’ population
does not move. For this reason, these seasons are also described as
stationary periods. Migration periods are defined as the periods of
movement between the stationary non-breeding and breeding seasons. Note
that for many species these migratory periods include not only movement
from breeding grounds to non-breeding grounds, but also post-breeding
dispersal, molt migration, and other movements.</p>
<p>Reviewers also examine the model estimates for each season to assess
the amount of extrapolation or omission present in the model, and assign
an associated quality rating ranging from 0 (lowest quality) to 3
(highest quality). Extrapolation refers to cases where the model
predicts occurrence where the species is known to be absent, while
omission refers to the model failing to predict occurrence where a
species is known to be present.</p>
<p>A rating of 0 implies this season failed review and model results
should not be used at all for this period. Ratings of 1-3 correspond to
a gradient of more to less extrapolation and/or omission, and we often
use a traffic light analogy when referring to them:</p>
<ol style="list-style-type: decimal">
<li><strong>Red light (1)</strong>: low quality, extensive extrapolation
and/or omission and noise, but at least some regions have estimates that
are accurate; can be used with caution in certain regions.</li>
<li><strong>Yellow light (2)</strong>: medium quality, some
extrapolation and/or omission; use with caution.</li>
<li><strong>Green light (3)</strong>: high quality, very little or no
extrapolation and/or omission; these seasons can be safely used.</li>
</ol>
<p>Let’s look at the results of the review for our example dataset.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>ebirdst_runs <span class="sc">|&gt;</span> </span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>  <span class="fu">filter</span>(species_code <span class="sc">==</span> <span class="st">&quot;yebsap-example&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code></pre></div>
<p>From this, we can see that Yellow-bellied Sapsucker was modeled as a
migrant and all four seasons received a quality of 3, the highest
rating. Note that there are a variety of trends-specific columns at the
end of this data frame that we’ll ignore for now; these columns will be
covered in the <a href="https://ebird.github.io/ebirdst/articles/trends.html">trends
vignette</a></p>
</div>
<div id="types" class="section level1">
<h1>Data types</h1>
<p>For each species, there are a variety of data products available,
which can be categorized into the following broad types:</p>
<ul>
<li><strong>Weekly raster estimates:</strong> weekly estimates of
occurrence, count, relative abundance, and proportion of population on a
regular grid in GeoTIFF format at three resolutions. These are the core
products from which the other products are derived.</li>
<li><strong>Seasonal raster estimates:</strong> seasonal estimates of
occurrence, count, relative abundance, and proportion of population on a
regular grid in GeoTIFF format at three resolutions. These are derived
from the corresponding weekly raster data by summarizing across the
weeks falling within each season based on the dates defined in the
<code>ebirdst_runs</code> data frame. Only seasons that passed the
expert review process are included.</li>
<li><strong>Seasonal range boundaries:</strong> seasonal range boundary
polygons in GeoPackage format.</li>
<li><strong>Regional summary statistics:</strong> a variety of summary
statistics for countries and states/provinces (e.g. proportion of total
population in the region) in CSV format.</li>
<li><strong>Predictive performance metrics (PPMs):</strong> a suite of
spatial predictive performance metrics on a regular 27 km by 27 km grid
in GeoTIFF format.</li>
</ul>
<p>Each of these data products will be covered in more detail in the
following sections, including details on how to load the data into R.
All of the loading functions take a species (given as common name,
scientific name, or species code) as their first argument. If you have
used a non-default <code>path</code> argument to
<code>ebirdst_download_status()</code> then you will also need to
provide the same <code>path</code> argument to the loading
functions.</p>
<div id="weekly-raster-estimates" class="section level2">
<h2>Weekly raster estimates</h2>
<p>The core raster data products are the weekly estimates of occurrence,
count, and relative abundance. These estimates are derived from an
ensemble model producing 100 individual estimates of the expected value
of each quantity. The raster data products give the median value across
the ensemble for each quantity.</p>
<p>The weekly estimates are all stored in the widely used GeoTIFF raster
format, and we refer to them as “weekly cubes” (e.g. the “weekly
abundance cube”). All cubes have 52 weeks and cover the entire globe,
even for species with ranges only covering a small region. They come
with areas of predicted and assumed zeroes, such that any cells that are
<code>NA</code> represent areas where we didn’t produce model
estimates.</p>
<p>All estimates are the ensemble median expected value for a 2 km, 1
hour eBird Traveling Count by an expert eBird observer at the optimal
time of day and for optimal weather conditions to observe the given
species.</p>
<ul>
<li><strong>Occurrence</strong>: the expected probability of
encountering a species.</li>
<li><strong>Count</strong>: the expected count of a species, conditional
on its occurrence at the given location.</li>
<li><strong>Relative abundance</strong>: the expected relative abundance
of a species, computed as the product of the probability of occurrence
and the count conditional on occurrence. In addition to the median
relative abundance, upper and lower confidence intervals (CIs) are
provided, defined at the 10th and 90th quantile of relative abundance,
respectively.</li>
<li><strong>Proportion of population</strong>: the proportion of the
total relative abundance within each cell. This is a derived product
calculated by dividing each cell value in the relative abundance raster
by the sum of all cell values</li>
</ul>
<p>All predictions are made on a standard 3 km by 3 km global grid;
however, for convenience lower resolution GeoTIFFs are also provided,
which are typically much faster to work with. However, note that to keep
file sizes small, <strong>the example dataset only contains lowest (27
km) resolution data</strong>. The three resolutions are:</p>
<ul>
<li>High resolution (3km): the native 3 km resolution data.</li>
<li>Medium resolution (9km): the 3 km resolution data aggregated by a
factor of 3 in each direction resulting in a resolution of 9 km.</li>
<li>Low resolution (27km): the 3 km resolution data aggregated by a
factor of 9 in each direction resulting in a resolution of 27 km.</li>
</ul>
<p>The function <code>load_raster()</code> is used to load these data
into R and takes arguments for <code>product</code> and
<code>resolution</code>. The <code>metric</code> argument can be also be
used to access the relative abundance CIs. All raster products are
loaded into R as <code>SpatRaster</code> objects for use with the
<code>terra</code> R package. For example,</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="co"># weekly, 27km res, median relative abundance</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>abd_lr <span class="ot">&lt;-</span> <span class="fu">load_raster</span>(<span class="st">&quot;yebsap-example&quot;</span>, <span class="at">product =</span> <span class="st">&quot;abundance&quot;</span>, </span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>                      <span class="at">resolution =</span> <span class="st">&quot;27km&quot;</span>)</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="co"># weekly, 27km res, median proportion of population</span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>prop_pop_lr <span class="ot">&lt;-</span> <span class="fu">load_raster</span>(<span class="st">&quot;yebsap-example&quot;</span>, <span class="at">product =</span> <span class="st">&quot;proportion-population&quot;</span>, </span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>                      <span class="at">resolution =</span> <span class="st">&quot;27km&quot;</span>)</span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a></span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a><span class="co"># weekly, 27km res, abundance confidence intervals</span></span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a>abd_lower <span class="ot">&lt;-</span> <span class="fu">load_raster</span>(<span class="st">&quot;yebsap-example&quot;</span>, <span class="at">product =</span> <span class="st">&quot;abundance&quot;</span>, <span class="at">metric =</span> <span class="st">&quot;lower&quot;</span>, </span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a>                         <span class="at">resolution =</span> <span class="st">&quot;27km&quot;</span>)</span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a>abd_upper <span class="ot">&lt;-</span> <span class="fu">load_raster</span>(<span class="st">&quot;yebsap-example&quot;</span>, <span class="at">product =</span> <span class="st">&quot;abundance&quot;</span>, <span class="at">metric =</span> <span class="st">&quot;upper&quot;</span>, </span>
<span id="cb4-13"><a href="#cb4-13" tabindex="-1"></a>                         <span class="at">resolution =</span> <span class="st">&quot;27km&quot;</span>)</span></code></pre></div>
<p>Each object has 52 layers, one for each week of the year, and layer
names store the dates corresponding to the midpoints of each week.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">as.Date</span>(<span class="fu">names</span>(abd_lr))</span></code></pre></div>
<p>The GeoTIFFs use the <a href="https://en.wikipedia.org/wiki/Equal_Earth_projection">Equal
Earth</a> coordinate reference system, an equal area projection suitable
for global mapping and analysis.</p>
</div>
<div id="seasonal-raster-estimates" class="section level2">
<h2>Seasonal raster estimates</h2>
<p>The seasonal raster estimates are provided for the same set of
products and at the same three resolutions as the weekly estimates.
They’re derived from the weekly data by taking the cell-wise mean or max
across the weeks within each season. The seasonal boundary dates are
defined through a process of expert review of each species, and are
available in the data frame <code>ebirdst_runs</code>. Each season is
also given a quality score from 0 (fail) to 3 (high quality), and
seasons with a score of 0 are not provided.</p>
<p>The function <code>load_raster(period = &quot;seasonal&quot;)</code> is used to
load these data into R and takes arguments for <code>product</code>,
<code>metric</code> and <code>resolution</code>. The data are loaded
into R as <code>SpatRaster</code> objects for use with the
<code>terra</code> package. For example,</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="co"># seasonal, 27km res, mean relative abundance</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>abd_seasonal_mean <span class="ot">&lt;-</span> <span class="fu">load_raster</span>(<span class="st">&quot;yebsap-example&quot;</span>, <span class="at">product =</span> <span class="st">&quot;abundance&quot;</span>, </span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>                                 <span class="at">period =</span> <span class="st">&quot;seasonal&quot;</span>, <span class="at">metric =</span> <span class="st">&quot;mean&quot;</span>, </span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a>                                 <span class="at">resolution =</span> <span class="st">&quot;27km&quot;</span>)</span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a><span class="co"># season that each layer corresponds to</span></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="fu">names</span>(abd_seasonal_mean)</span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a><span class="co"># just the breeding season layer</span></span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a>abd_seasonal_mean[[<span class="st">&quot;breeding&quot;</span>]]</span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a></span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a><span class="co"># seasonal, 27km res, max occurrence</span></span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a>occ_seasonal_max <span class="ot">&lt;-</span> <span class="fu">load_raster</span>(<span class="st">&quot;yebsap-example&quot;</span>, <span class="at">product =</span> <span class="st">&quot;occurrence&quot;</span>, </span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a>                                <span class="at">period =</span> <span class="st">&quot;seasonal&quot;</span>, <span class="at">metric =</span> <span class="st">&quot;max&quot;</span>, </span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a>                                <span class="at">resolution =</span> <span class="st">&quot;27km&quot;</span>)</span></code></pre></div>
<p>Finally, as a convenience, the data products include year-round
rasters summarizing the mean or max across all weeks that fall within a
season that passed the expert review process. These can be accessed
similarly to the seasonal products, but with
<code>period = &quot;full-year&quot;</code> instead. For example, these layers can
be used in conservation planning to assess the most important sites
across the full range and full annual cycle of a species.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="co"># full year, 27km res, maximum relative abundance</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>abd_fy_max <span class="ot">&lt;-</span> <span class="fu">load_raster</span>(<span class="st">&quot;yebsap-example&quot;</span>, <span class="at">product =</span> <span class="st">&quot;abundance&quot;</span>, </span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>                          <span class="at">period =</span> <span class="st">&quot;full-year&quot;</span>, <span class="at">metric =</span> <span class="st">&quot;max&quot;</span>, </span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>                          <span class="at">resolution =</span> <span class="st">&quot;27km&quot;</span>)</span></code></pre></div>
</div>
<div id="range-boundaries" class="section level2">
<h2>Range boundaries</h2>
<p>Seasonal range polygons are defined as the boundaries of non-zero
seasonal relative abundance estimates, which are then (optionally)
smoothed to produce more aesthetically pleasing polygons using the
<code>smoothr</code> package. They are provided in the widely used
GeoPackage format and can be loaded into R with
<code>load_ranges()</code>, which returns a set of spatial features for
use with the <code>sf</code> R package. By default the smoothed ranges
are returned, but using <code>smoothed = FALSE</code> will return the
raw, unsmoothed range polygons. Note that only low and medium resolution
ranges are provided. These range polygons can be loaded with
<code>load_ranges()</code>:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="co"># seasonal, 27km res, smoothed ranges</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>ranges <span class="ot">&lt;-</span> <span class="fu">load_ranges</span>(<span class="st">&quot;yebsap-example&quot;</span>, <span class="at">resolution =</span> <span class="st">&quot;27km&quot;</span>)</span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a>ranges</span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a><span class="co"># subset to just the breeding season range using dplyr</span></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a>range_breeding <span class="ot">&lt;-</span> <span class="fu">filter</span>(ranges, season <span class="sc">==</span> <span class="st">&quot;breeding&quot;</span>)</span></code></pre></div>
</div>
<div id="regional-summary-statistics" class="section level2">
<h2>Regional summary statistics</h2>
<p>Regional summaries of the seasonal raster estimates are also provided
for a standard set of regions (countries and states/provinces). These
summary statistics can be loaded with
<code>load_regional_stats()</code>:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a>regional <span class="ot">&lt;-</span> <span class="fu">load_regional_stats</span>(<span class="st">&quot;yebsap-example&quot;</span>)</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="fu">glimpse</span>(regional)</span></code></pre></div>
<p>The six summary statistics are defined as:</p>
<ul>
<li><code>abundance_mean</code>: mean relative abundance in the
region.</li>
<li><code>total_pop_percent</code>: the proportion of the seasonal
modeled population within the region.</li>
<li><code>continent_pop_percent</code>: the proportion of the seasonal
modeled population for the continent within the region. The
<code>continent_name</code> column identifies the continent that the
region falls within. Note that Yellow-bellied Sapsucker only occurs in
North American so the total and continental proportions are
identical.</li>
<li><code>range_percent_occupied</code>: the proportion of the region
occupied by the species during the given season.</li>
<li><code>range_total_percent</code>: the proportion of the species
seasonal range falling within the region.</li>
<li><code>range_days_occupation</code>: number of days of the season
that the region was occupied by this species.</li>
</ul>
</div>
<div id="predictive-performance-metrics-ppms" class="section level2">
<h2>Predictive performance metrics (PPMs)</h2>
<p>A subset of 10% of the eBird observations is excluded from model
training to be used as a test set. For each submodel making up the eBird
Status model ensemble, model predictions are compared to actual
occurrence and count for a spatiotemporally subsampled version of the
test dataset to generate a suite of predictive performance metrics
(PPMs) at the base model level. These PPMs are then summarized across
the ensemble to a 27 km resolution raster grid, where the cell values
are the average across all models in the ensemble contributing to that
cell. For migrants, PPMs are provided at weekly temporal resolution, in
the form of a stack of 52 rasters for each metric, while for residents,
year round PPMs are provided in the form of a single raster for each
metric.</p>
<p>In total, nineteen predictive performance metrics are provided in
four categories. <strong>Binary</strong> PPMs compare the predicted
presence/absence to observed detection/non-detection for all test
checklists.</p>
<ul>
<li><code>binary_f1</code>: <a href="https://en.wikipedia.org/wiki/F-score">F1-score</a>.</li>
<li><code>binary_mcc</code>: <a href="https://en.wikipedia.org/wiki/Phi_coefficient">Matthews
Correlation Coefficient (MCC)</a>.</li>
<li><code>binary_prevalence</code>: the observed detection probability
after spatiotemporal subsampling.</li>
</ul>
<p><strong>Occurrence</strong> PPMs compare the predicted encounter rate
with the observed detection/non-detection for the subset of test
checklists within the predicted range boundary.</p>
<ul>
<li><code>occ_bernoulli_dev</code>: the proportion of the Bernoulli
deviance explained.</li>
<li><code>occ_bin_spearman</code>: test observations are binned by
predicted encounter rate with bin widths of 0.05, then the mean observed
prevalence and predicted encounter rate are calculated within bins. This
metric is the Spearman’s rank correlation coefficient comparing the
observed and predicted binned mean values.</li>
<li><code>occ_brier</code>: Brier score, i.e. the mean squared
difference between predicted encounter rate and observed
detection/non-detection.</li>
<li><code>occ_pr_auc</code>: <a href="https://doi.org/10.1111/2041-210X.13140">area on the
precision-recall curve (PR-AUC)</a></li>
<li><code>occ_pr_auc_gt_prev</code>: the proportion of the ensemble for
which the PR-AUC is greater than observed prevalence, which indicates
that the model is performing better than random guessing.</li>
<li><code>occ_pr_auc_normalized</code>: the <a href="https://icml.cc/2012/papers/349.pdf">PR-AUC normalized</a> to
account for class imbalance so that a value of 0 represents performance
equal to random guessing and a value of 1 represents perfect
classification.</li>
</ul>
<p><strong>Count</strong> PPMs compare the predicted count with the
observed count for the subset of test checklists within the predicted
range boundary and where the species was detected.</p>
<ul>
<li><code>count_log_pearson</code>: the Pearson correlation coefficient
comparing the logarithm of the predicted count with the logarithm of the
observed count.</li>
<li><code>count_mae</code>: mean absolute error (MAE).</li>
<li><code>count_poisson_dev</code>: the proportion of the Poisson
deviance explained.</li>
<li><code>count_rmse</code>: route mean squared error (RMSE).</li>
<li><code>count_spearman</code>: Spearman’s rank correlation
coefficient.</li>
</ul>
<p><strong>Abundance</strong> PPMs compare the predicted relative
abundance with the observed count for the full set of tests
checklists.</p>
<ul>
<li><code>abd_log_pearson</code>: Pearson correlation coefficient
comparing the logarithm of the predicted relative abundance with the
logarithm of the observed count.</li>
<li><code>abd_mae</code>: the mean absolute error (MAE).</li>
<li><code>abd_poisson_dev</code>: the proportion of the Poisson deviance
explained.</li>
<li><code>abd_rmse</code>: root mean squared error (RMSE).</li>
<li><code>abd_spearman</code>: Spearman’s rank correlation
coefficient.</li>
</ul>
<p>The spatial PPMs can be loaded using <code>load_ppms()</code>. For
example, to load the normalized PR-AUC for the example dataset use.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a>pr_auc <span class="ot">&lt;-</span> <span class="fu">load_ppm</span>(<span class="st">&quot;yebsap-example&quot;</span>, <span class="at">ppm =</span> <span class="st">&quot;occ_pr_auc_normalized&quot;</span>)</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="fu">print</span>(pr_auc)</span></code></pre></div>
<p>Since Yellow-bellied Sapsucker is a migrant, there are 52 layers, one
for each week of the year, giving the mean PR-AUC for each 27 km by 27
km grid cell. We can produce a simple plot of PR-AUC for a week in the
middle of the year. Note that <code>trim()</code> is used to trim the
global raster down to just show the area with data (the state of
Michigan in this example dataset).</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">trim</span>(pr_auc[[<span class="dv">26</span>]]))</span></code></pre></div>
<p>See the <a href="https://ebird.github.io/ebirdst/articles/applications.html">applications
vignette</a> for a more detailed example of how to use the PPMs.</p>
</div>
</div>
<div id="coverage" class="section level1">
<h1>Data coverage</h1>
<p>In addition to the species-specific data products discussed above,
<code>ebirdst</code> provides access to two species agnostic data
products from out data coverage workflow. The data products in GeoTIFF
format provide weekly estimates on a regular 3 km by 3km grid of</p>
<ol style="list-style-type: decimal">
<li><strong>Site selection probability:</strong> the modeled probability
(0-1) that a grid cell of a certain habitat configuration received an
eBird checklist within that region and season.</li>
<li><strong>Spatial coverage:</strong> the fraction (0-1) of grid cells
within that region and season that checklists for the given week.</li>
</ol>
<p>These data products identify areas where the coverage of eBird data
is relatively high or low, which can be used to prioritize areas for
increased data collection. To download the data coverage data products
use:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="fu">ebirdst_download_data_coverage</span>()</span></code></pre></div>
<p>Then to load the data, for example, site selection probability for
the week of May 10, and make a map, use:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>site_sel <span class="ot">&lt;-</span> <span class="fu">load_data_coverage</span>(<span class="st">&quot;selection-probability&quot;</span>, <span class="at">week =</span> <span class="st">&quot;05-10&quot;</span>)</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="fu">plot</span>(site_sel, <span class="at">axes =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</div>
<div id="references" class="section level1">
<h1>References</h1>
<blockquote>
Fink, D., T. Auer, A. Johnston, V. Ruiz‐Gutierrez, W.M. Hochachka, S.
Kelling. 2019. Modeling avian full annual cycle distribution and
population trends with citizen science data. Ecological Applications,
00(00):e02056. doi: 10.1002/eap.2056
</blockquote>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
